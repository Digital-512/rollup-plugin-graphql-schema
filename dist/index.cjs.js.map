{"version":3,"file":"index.cjs.js","sources":["../src/index.js"],"sourcesContent":["import { createFilter } from \"@rollup/pluginutils\";\r\nimport { parse, printSchema } from \"graphql\";\r\nimport { loadSchemaSync } from \"@graphql-tools/load\";\r\nimport { GraphQLFileLoader } from \"@graphql-tools/graphql-file-loader\";\r\n\r\nexport default function graphql(options = {}) {\r\n    // path filter\r\n    const filter = createFilter(options.include, options.exclude);\r\n    // only .graphql and .gql files\r\n    const filterExt = /\\.(graphql|graphqls|gql|gqls)$/i;\r\n\r\n    return {\r\n        name: \"graphql\",\r\n\r\n        // eslint-disable-next-line no-shadow\r\n        transform(source, id) {\r\n            if (!filterExt.test(id) || !filter(id)) return null;\r\n\r\n            // load schema from file as GraphQLSchema object\r\n            const schemaFile = loadSchemaSync(id, {\r\n                loaders: [new GraphQLFileLoader()]\r\n            });\r\n\r\n            let EXPORT = null;\r\n\r\n            // convert schema into AST\r\n            const parsed = JSON.stringify(\r\n                parse(printSchema(schemaFile), { noLocation: true })\r\n            );\r\n\r\n            if (options.exportAST) {\r\n                // export only AST\r\n                EXPORT = `export default ${parsed}`;\r\n            } else {\r\n                // export GraphQLSchema object\r\n                EXPORT = `import { buildASTSchema } from 'graphql';`;\r\n                EXPORT += `export default buildASTSchema(${parsed});`;\r\n            }\r\n\r\n            return {\r\n                code: EXPORT,\r\n                map: { mappings: \"\" }\r\n            };\r\n        }\r\n    };\r\n}\r\n"],"names":["const","createFilter","loadSchemaSync","GraphQLFileLoader","let","parse","printSchema"],"mappings":";;;;;;;AAKe,SAAS,OAAO,CAAC,OAAY,EAAE;qCAAP,GAAG;AAAK;AAC/C;AACA,IAAIA,IAAM,MAAM,GAAGC,wBAAY,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;AAClE;AACA,IAAID,IAAM,SAAS,GAAG,iCAAiC,CAAC;AACxD;AACA,IAAI,OAAO;AACX,QAAQ,IAAI,EAAE,SAAS;AACvB;AACA;AACA,QAAQ,6BAAS,CAAC,MAAM,EAAE,EAAE,EAAE;AAC9B,YAAY,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,IAAE,OAAO,IAAI,GAAC;AAChE;AACA;AACA,YAAYA,IAAM,UAAU,GAAGE,mBAAc,CAAC,EAAE,EAAE;AAClD,gBAAgB,OAAO,EAAE,CAAC,IAAIC,mCAAiB,EAAE,CAAC;AAClD,aAAa,CAAC,CAAC;AACf;AACA,YAAYC,IAAI,MAAM,GAAG,IAAI,CAAC;AAC9B;AACA;AACA,YAAYJ,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS;AACzC,gBAAgBK,eAAK,CAACC,qBAAW,CAAC,UAAU,CAAC,EAAE,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;AACpE,aAAa,CAAC;AACd;AACA,YAAY,IAAI,OAAO,CAAC,SAAS,EAAE;AACnC;AACA,gBAAgB,MAAM,GAAG,oBAAkB,MAAQ,CAAC;AACpD,aAAa,MAAM;AACnB;AACA,gBAAgB,MAAM,GAAG,2CAA2C,CAAC;AACrE,gBAAgB,MAAM,IAAI,mCAAiC,MAAM,OAAI,CAAC;AACtE,aAAa;AACb;AACA,YAAY,OAAO;AACnB,gBAAgB,IAAI,EAAE,MAAM;AAC5B,gBAAgB,GAAG,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE;AACrC,aAAa,CAAC;AACd,SAAS;AACT,KAAK,CAAC;AACN;;;;"}